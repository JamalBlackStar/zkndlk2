<!DOCTYPE html>
<html lang="ru">
<head>
<meta charset="UTF-8">
<meta name="viewport" content="width=device-width, initial-scale=1.0">
<title>КОДЕКС ОБ АДМИНИСТРАТИВНЫХ НАРУШЕНИЯХ</title>
<style>
:root {
  --bg:#0b0d10; --card:#12151a; --text:#e9eef5; --muted:#9fb0c3; --accent:#4ea1ff;
}
body{margin:0;font-family:system-ui,-apple-system,Segoe UI,Roboto,Ubuntu,"Helvetica Neue",Arial;background:var(--bg);color:var(--text);overflow-x:hidden;}
.wrap{max-width:920px;margin:0 auto;padding:24px;position:relative;z-index:1}
h1{font-size:clamp(20px,3.5vw,32px);margin:0 0 10px}
.sub{color:var(--muted);margin-bottom:18px}
.searchBar{position:sticky;top:0;background:linear-gradient(180deg,rgba(11,13,16,.9),rgba(11,13,16,.7));backdrop-filter: blur(8px); z-index:10; padding:12px 0 16px}
.row{display:flex;gap:10px;align-items:center}
input[type="text"]{flex:1;padding:14px 14px;border:1px solid #263142;background:#0f1318;border-radius:14px;color:var(--text);outline:none}
input::placeholder{color:#6a7a8b}
button{padding:14px 18px;border:0;border-radius:12px;background:var(--accent);color:#001833;font-weight:700;cursor:pointer}
.grid{display:grid;grid-template-columns:1fr;gap:12px;margin-top:16px}
@media(min-width:720px){.grid{grid-template-columns:1fr 1fr}}
.card{background:var(--card);border:1px solid #1b212a;border-radius:16px;padding:14px;box-shadow:0 8px 24px rgba(0,0,0,.25);transition:0.3s;}
.card:hover{transform:translateY(-3px)}
.pill{display:inline-flex;align-items:center;gap:6px;padding:6px 10px;border-radius:999px;border:1px solid #293342;color:#cfe1ff;background:#0e141d;font-size:12px}
.muted{color:#9db0c6}
.fine{font-weight:700}
.hl{background:rgba(78,161,255,.2); padding:0 .2em; border-radius:4px}
.footer{opacity:.75; font-size:12px; margin-top:14px}
.empty{border:1px dashed #334357;border-radius:14px;padding:14px;text-align:center;color:#9db0c6}
.themeToggle{position:fixed;top:12px;right:12px;padding:8px 12px;border-radius:10px;border:none;background:#4ea1ff;color:#001833;font-weight:700;cursor:pointer;z-index:10;}
.nick{position:fixed;top:12px;left:12px;font-weight:700;color:#ffffff;font-size:16px;z-index:10;}

/* === Анимация частиц === */
.particle{position:absolute;width:8px;height:8px;background:#4ea1ff;border-radius:50%;opacity:0.6;pointer-events:none;animation:fall 6s linear infinite;}
@keyframes fall{0%{transform:translateY(-20px);}100%{transform:translateY(110vh);}}
</style>
</head>
<body>

<div class="nick">bu Jamal Mamedov</div>
<button class="themeToggle" id="themeBtn">Сменить тему</button>

<div class="wrap">
  <div class="searchBar">
    <h1>КОДЕКС ОБ АДМИНИСТРАТИВНЫХ НАРУШЕНИЯХ РЕСПУБЛИКИ ПРОВИНЦИИ</h1>
    <div class="sub">Вводи ситуацию своими словами: «проехал на красный», «без документов» и т.д.</div>
    <div class="row">
      <input id="q" type="text" placeholder="Например: проезд на красный / без документов / превышение 40" />
      <button id="btn">Найти</button>
    </div>
  </div>
  <div id="results" class="grid"></div>
  <div id="empty" class="empty" style="display:none">Ничего не найдено.</div>
  <div class="footer muted">Прототип работает полностью локально (HTML+JS).</div>
</div>

<!-- === Частицы === -->
<script>
for(let i=0;i<30;i++){
  const p = document.createElement('div');
  p.className='particle';
  p.style.left=Math.random()*100+'vw';
  p.style.animationDuration=(4+Math.random()*4)+'s';
  document.body.appendChild(p);
}
</script>

<script>
// === Тема ===
let dark = true;
document.getElementById('themeBtn').onclick = ()=>{
  dark = !dark;
  if(dark){
    document.documentElement.style.setProperty('--bg','#0b0d10');
    document.documentElement.style.setProperty('--card','#12151a');
    document.documentElement.style.setProperty('--text','#e9eef5');
    document.documentElement.style.setProperty('--muted','#9fb0c3');
    document.documentElement.style.setProperty('--accent','#4ea1ff');
  } else {
    document.documentElement.style.setProperty('--bg','#f9f9f9');
    document.documentElement.style.setProperty('--card','#ffffff');
    document.documentElement.style.setProperty('--text','#333333');
    document.documentElement.style.setProperty('--muted','#777777');
    document.documentElement.style.setProperty('--accent','#4ea1ff');
  }
};

// === Подсветка ===
const norm = s => (s||"").toLowerCase().replace(/[ё]/g,'е').replace(/[^a-zA-Zа-яА-Я0-9+ ]+/g,' ').replace(/\s+/g,' ').trim();
function highlight(text, query){
  const q = norm(query).split(' ').filter(w=>w.length>2);
  if(!q.length) return text;
  let out = text;
  q.forEach(w=>{
    const re = new RegExp(`(${w.replace(/[.*+?^${}()|[\]\\]/g, "\\$&")})`,'gi');
    out = out.replace(re,'<span class="hl">$1</span>');
  });
  return out;
}

// === DB ===
const DB = [
  // Глава 5
  {gl:'5', art:'5.1', title:'Управление без документов', law:'Управление ТС без документов (см. 2.1.1 ПДД).', fine:'20 000 ₽', tags:['документы','водитель','2.1.1'], syn:['нет документов','без документов','забыл права','нет страховки при себе','нет св-ва о регистрации при себе']},
  {gl:'5', art:'5.2', title:'Не предоставил документы по требованию', law:'Непредоставление документов по требованию (см. 2.1.1 ПДД).', fine:'30 000 ₽ или лишение (с переобучением)', tags:['документы','проверка'], syn:['не показал документы','отказ показать документы','не предоставил права']},
  {gl:'5', art:'5.3', title:'ТС не зарегистрировано / без знаков', law:'Управление незарегистрированным ТС либо без/с изменёнными знаками (см. 2.1.2 ПДД).', fine:'10 000 ₽', tags:['регистрация','знак','номера'], syn:['без номеров','скрытые номера','рамка скрывает номер','не успел поставить на учет']},
  {gl:'5', art:'5.4', title:'Тонировка ниже нормы', law:'Светопропускаемость < 70% на лобовом/передних стёклах (см. 2.4 ПДД).', fine:'20 000 ₽', tags:['тонировка','стекло'], syn:['тонировка','цветная пленка','темные стекла','низкая светопропускаемость']},
  {gl:'5', art:'5.5', title:'Технеисправное ТС / запрещающие условия', law:'Управление ТС при неисправности или в условиях, когда запрещено (см. 2.4 ПДД).', fine:'Предупреждение или 10 000–30 000 ₽', tags:['технеисправность'], syn:['лампа не горит','неисправность тормозов','трещина лобового','запрещено эксплуатацией']},
  {gl:'5', art:'5.6', title:'Без мотошлема (мото/мопед)', law:'Управление/перевозка без мотошлемов (см. 2.1.3 ПДД).', fine:'Предупреждение или 5 000 ₽', tags:['мото','шлем'], syn:['без шлема','пассажир без шлема']},
  {gl:'5', art:'5.7', title:'Нарушения пешеходов/велосипедистов', law:'Нарушение ПДД пешеходами и велосипедистами (глава 4 ПДД).', fine:'Предупреждение или 5 000–15 000 ₽', tags:['пешеход','велосипед'], syn:['пешеход нарушил','велосипедист нарушил']},
  {gl:'5', art:'5.8', title:'Посадка/высадка со стороны проезжей части', law:'Нарушение правил посадки/высадки (см. 5.1 ПДД).', fine:'Предупреждение или 5 000 ₽', tags:['посадка','высадка'], syn:['высадка на проезжей','открыл дверь на проезжую']},
  {gl:'5', art:'5.9', title:'Игнорирование требования остановиться жезлом', law:'Игнорирование требования об остановке (жезл).', fine:'20 000 ₽', tags:['остановка','жезл'], syn:['не остановился по требованию','проигнорировал жезл']},
  {gl:'5', art:'5.10', title:'Знаки/разметка: несоблюдение', law:'Несоблюдение требований знаков/разметки (прил. 1–2 ПДД).', fine:'5 000 ₽', tags:['знаки','разметка'], syn:['проехал под кирпич','нарушил разметку','знак запрета']},

  // Глава 6
  {gl:'6', art:'6.1', title:'Приоритет с маячками без уверенности в безопасности', law:'Использование приоритета с включёнными маячками/сиреной без уверенности в безопасности (см. 3.1 ПДД).', fine:'10 000 ₽', tags:['маячок','сирена'], syn:['маячки','спецсигналы']},
  {gl:'6', art:'6.2', title:'Аварийная сигнализация — нарушения', law:'Нарушение правил использования аварийной сигнализации (см. 7.1 ПДД).', fine:'Предупреждение или 10 000 ₽', tags:['аварийка']},
  {gl:'6', art:'6.3', title:'Знак аварийной остановки — нарушения', law:'Нарушение правил использования знака аварийной остановки (см. 7.2 ПДД).', fine:'Предупреждение или 10 000 ₽', tags:['аварийный знак']},
  {gl:'6', art:'6.4', title:'Движение с выключенными фарами', law:'Управление ТС с выключенными фарами (см. 8.1 ПДД).', fine:'Предупреждение или 5 000 ₽', tags:['фары','ближний свет'], syn:['без света','едет без фар']},
  {gl:'6', art:'6.5', title:'Неправомерное использование звукового сигнала', law:'Использование звукового сигнала с нарушением ПДД (см. 8.3 ПДД).', fine:'Предупреждение или 5 000 ₽', tags:['сигнал','клаксон'], syn:['гудел','сигналил']},

  // Глава 7
  {gl:'7', art:'7.1', title:'Проезд на запрещающий сигнал', law:'Красный сигнал/жест регулировщика/жёлтый при возможности остановки (см. 6.1 ПДД).', fine:'20 000 ₽', tags:['светофор','красный','регулировщик'], syn:['проехал на красный','запрещающийсигнал','на желтый']},
  {gl:'7', art:'7.2', title:'Не остановился перед стоп-линией', law:'Неисполнение требования остановки перед стоп-линией при запрещающем сигнале (см. 6.2 ПДД).', fine:'10 000 ₽', tags:['стоп-линия','светофор'], syn:['пересёк стоп линию','не остановился у стоп линии']},

  // Глава 8
  {gl:'8', art:'8.1', title:'Начало/перестроение/поворот без сигнала', law:'Манёвр без включения указателей поворота (см. 9.1 ПДД).', fine:'Предупреждение или 5 000 ₽', tags:['поворотник','манёвр'], syn:['без поворотника','не включил поворотник']},
  {gl:'8', art:'8.2', title:'Не уступил при перестроении', law:'Не предоставил преимущество при перестроении (см. 9.4 ПДД).', fine:'20 000 ₽', tags:['перестроение','преимущество']},
  {gl:'8', art:'8.3', title:'Поворот/разворот не из своей полосы', law:'Манёвр из неверной полосы (см. 9.4 ПДД).', fine:'20 000 ₽', tags:['полоса','поворот']},
  {gl:'8', art:'8.4', title:'Манёвр в нарушение знаков/разметки', law:'Поворот/разворот/задний ход в нарушение ПДД/знаков/разметки (см. 9.4, 9.4.1, 9.6, 9.7).', fine:'20 000 ₽', tags:['манёвр','разметка','знаки']},

  // Глава 9
  {gl:'9', art:'9.1', title:'Движение по встречной полосе', law:'Движение по встречной в нарушение ПДД (см. 10.1 ПДД).', fine:'50 000 ₽ + лишение до 2 лет', tags:['встречка']},
  {gl:'9', art:'9.2', title:'Выезд на встречную полосу', law:'Выезд на встречную в нарушение ПДД (см. 10.1 ПДД).', fine:'50 000 ₽', tags:['встречка','выезд']},
  {gl:'9', art:'9.3', title:'Левая полоса вне НП при свободных правых', law:'Движение по левым полосам при свободных правых (см. 10.2 ПДД).', fine:'Предупреждение или 5 000 ₽', tags:['полоса','вне НП']},
  {gl:'9', art:'9.4', title:'Движение по прерывистой в нарушение', law:'Движение по прерывистым линиям разметки с нарушением (см. 10.4 ПДД).', fine:'Предупреждение или 10 000 ₽', tags:['разметка']},
  {gl:'9', art:'9.5', title:'Движение по обочине/тротуару/газону', law:'Движение по разделительным полосам, обочинам, тротуарам, газону (см. 10.6 ПДД).', fine:'30 000 ₽', tags:['обочина','тротуар','газон']},
  {gl:'9', art:'9.6', title:'Дистанция/интервал не соблюдены', law:'Несоблюдение дистанции/бокового интервала (см. 10.8 ПДД).', fine:'Предупреждение или 10 000 ₽', tags:['дистанция','интервал']},

  // Глава 10 — обгон
  {gl:'10', art:'10.1', title:'Обгон ТС со спецсигналами', law:'Обгон ТС со спецраскраской и включёнными маячками/сиреной (см. 3.2 ПДД).', fine:'20 000 ₽', tags:['обгон','спецсигналы']},
  {gl:'10', art:'10.2', title:'Обгон кортежа/сопровождения', law:'Обгон ТС со спецсигналами и сопровождаемых ТС (см. 3.2 ПДД).', fine:'20 000 ₽', tags:['обгон','сопровождение']},
  {gl:'10', art:'10.3', title:'Обгон там, где запрещён', law:'Обгон в запрещённых случаях (см. 12.2 ПДД).', fine:'20 000 ₽', tags:['обгон запрещён']},
  {gl:'10', art:'10.4', title:'Препятствование обгону', law:'Создание препятствий для обгоняющего (см. 12.3 ПДД).', fine:'20 000 ₽', tags:['обгон','препятствие']},

  // Глава 11 — остановка/стоянка
  {gl:'11', art:'11.1', title:'Остановка/стоянка на переходе/тротуаре', law:'На пешеходном переходе/ближе 5 м перед ним, на тротуаре (см. 13.3 ПДД).', fine:'10 000 ₽', tags:['остановка','переход','тротуар']},
  {gl:'11', art:'11.2', title:'Остановка у остановки ОТ', law:'В местах остановки маршрутных ТС/ближе 15 м (см. 13.3 ПДД).', fine:'10 000 ₽', tags:['остановка','общественный транспорт']},
  {gl:'11', art:'11.3', title:'Остановка на трамвайных путях/газоне/второй ряд', law:'На трамвайных путях, газоне, далее первого ряда (см. 13.3 ПДД).', fine:'10 000 ₽', tags:['трамвай','газон','второй ряд']},
  {gl:'11', art:'11.4', title:'Нарушение остановки — создал препятствие', law:'Нарушение остановки/стоянки с созданием препятствий (см. 13.3 ПДД).', fine:'10 000 ₽', tags:['препятствие']},
  {gl:'11', art:'11.5', title:'Иные нарушения остановки/стоянки', law:'Иные случаи нарушений остановки/стоянки (гл. 13 ПДД).', fine:'10 000 ₽', tags:['остановка','стоянка']},

  // Глава 12 — перекрёстки
  {gl:'12', art:'12.1', title:'Перекрёсток: безопасности', law:'Нарушения правил проезда перекрёстков (без опасности) (гл. 14 ПДД).', fine:'Предупреждение или 5 000 ₽', tags:['перекрёсток']},
  {gl:'12', art:'12.2', title:'Перекрёсток: с опасностью', law:'Нарушения правил проезда перекрёстков (с опасностью) (гл. 14 ПДД).', fine:'10 000 ₽', tags:['перекрёсток','опасность']},

  // Глава 13 — Ж/д
  {gl:'13', art:'13.1', title:'Ж/д: пересечение вне мест', law:'Пересечение ж/д путей в не оборудованных местах (см. 16.1 ПДД).', fine:'Предупреждение или 5 000 ₽', tags:['жд','переезд']},
  {gl:'13', art:'13.2', title:'Ж/д: выезд при запрете', law:'Выезд на переезд, когда это запрещено (см. 16.3 ПДД).', fine:'20 000 ₽', tags:['жд','запрещено']},
  {gl:'13', art:'13.3', title:'Ж/д: остановка ближе нормы', law:'Остановка ближе 5 м от шлагбаума / 10 м до рельса (см. 16.4 ПДД).', fine:'Предупреждение или 5 000 ₽', tags:['жд','остановка']},

  // Глава 14 — автомагистрали/жилые зоны/колонны
  {gl:'14', art:'14.1', title:'Медленные ТС на автомагистрали', law:'Движение ТС < 40 км/ч по возможностям — на автомагистрали (см. 17.1 ПДД).', fine:'10 000 ₽', tags:['автомагистраль','скорость']},
  {gl:'14', art:'14.2', title:'Грузовым — далее второй полосы', law:'Грузовым далее второй полосы (см. 17.1 ПДД).', fine:'Предупреждение или 5 000 ₽', tags:['грузовой','полосы']},
  {gl:'14', art:'14.3', title:'Задний ход на автомагистрали', law:'Движение задним ходом на автомагистрали (см. 17.1 ПДД).', fine:'10 000 ₽', tags:['задний ход','автомагистраль']},
  {gl:'14', art:'14.4', title:'Пешеход мешает в жилой зоне', law:'Создание пешеходом помех в жилых зонах (см. 18.1 ПДД).', fine:'Предупреждение или 5 000 ₽', tags:['пешеход','жилая зона']},
  {gl:'14', art:'14.5', title:'Запреты в жилых зонах', law:'Сквозное движение/учебная езда/стоянка с работающим двигателем/груз. >3,5 т вне спец. мест (см. 18.2 ПДД).', fine:'Предупреждение или 5 000 ₽', tags:['жилая зона']},
  {gl:'14', art:'14.6', title:'Движение в колонне с нарушениями', law:'Нарушение правил движения в колонне (гл. 19 ПДД).', fine:'Предупреждение или 10 000 ₽', tags:['колонна']},

  // Глава 15 — преимущество
  {gl:'15', art:'15.1', title:'Не уступил спецтранспорту', law:'Не предоставил преимущество ТС с маячками/сиреной (см. 3.2 ПДД).', fine:'20 000 ₽', tags:['преимущество','спецсигналы']},
  {gl:'15', art:'15.2', title:'Не уступил автобусу/троллейбусу', law:'Не предоставил преимущество ОТ, начинающему движение (см. 20.2 ПДД).', fine:'5 000 ₽', tags:['преимущество','остановка ОТ']},
  {gl:'15', art:'15.3', title:'Не уступил главной / при выезде', law:'Не предоставил преимущество с главной дороги / при выезде (см. 9.3 ПДД).', fine:'10 000 ₽', tags:['главная','прилегающая']},
  {gl:'15', art:'15.4', title:'Не уступил пешеходу/велосипедисту', law:'Не предоставил преимущество пешим/велосипедистам (см. 15.1 ПДД).', fine:'Предупреждение или 5 000 ₽', tags:['пешеход','велосипед']},

  // Глава 16 — ДТП
  {gl:'16', art:'16.1', title:'Оставил место ДТП', law:'Оставление места ДТП (см. 2.4 ПДД).', fine:'30 000 ₽ + лишение 3–4 года + арест 20 суток', tags:['ДТП','оставил место']},
  {gl:'16', art:'16.2', title:'Не оказал первую помощь', law:'Неоказание первой помощи при ДТП (см. 2.3 ПДД).', fine:'20 000 ₽', tags:['первая помощь','ДТП']},
  {gl:'16', art:'16.3', title:'Не выполнил обязанности при ДТП', law:'Невыполнение обязанностей водителя при ДТП (см. 2.3 ПДД).', fine:'10 000–35 000 ₽', tags:['ДТП','обязанности']},

  // Глава 17 — общественный порядок/безопасность
  {gl:'17', art:'17.1.4', title:'Управление в состоянии опьянения / передача управления пьяному', law:'Состояние опьянения (см. 2.4 ПДД).', fine:'30 000 ₽ + лишение до 1 года', tags:['опьянение']},
  {gl:'17', art:'17.1.5', title:'Отказ от медосвидетельствования', law:'Невыполнение требования пройти медосвидетельствование.', fine:'30 000 ₽ + лишение до 1 года', tags:['медосвидетельствование']},
  {gl:'17', art:'17.2', title:'Опасное вождение', law:'Опасное вождение (см. 2.4 ПДД).', fine:'до 30 000 ₽ + лишение до 2 лет', tags:['опасное вождение']},{gl:'17', art:'17.3', title:'Неуплата штрафов до 10 000 ₽', law:'Управление при неуплате штрафов до 10 000 ₽.', fine:'Предупреждение', tags:['штрафы']},
  {gl:'17', art:'17.4', title:'Неуплата штрафов 10–50 000 ₽', law:'Управление при неуплате штрафов 10–50 000 ₽.', fine:'30 000 ₽', tags:['штрафы']},
  {gl:'17', art:'17.5', title:'Неуплата штрафов 50–100 000 ₽', law:'Управление при неуплате штрафов 50–100 000 ₽.', fine:'50 000 ₽ + лишение 1 год', tags:['штрафы']},
  {gl:'17', art:'17.6', title:'Неуплата штрафов >100 000 ₽', law:'Управление при неуплате штрафов более 100 000 ₽.', fine:'100 000 ₽ + лишение 2 года', tags:['штрафы']},

  // Глава 18 — скорость
  {gl:'18', art:'18.1', title:'Превышение на 10–20 км/ч', law:'Превышение скорости на 10–20 км/ч (зафиксировано сотрудниками).', fine:'Предупреждение', tags:['скорость']},
  {gl:'18', art:'18.2', title:'Превышение на 20–40 км/ч', law:'Превышение скорости на 20–40 км/ч.', fine:'2 000 ₽', tags:['скорость']},
  {gl:'18', art:'18.3', title:'Превышение на 40–60 км/ч', law:'Превышение скорости на 40–60 км/ч.', fine:'5 000 ₽', tags:['скорость']},
  {gl:'18', art:'18.4', title:'Превышение на 60–80 км/ч', law:'Превышение скорости на 60–80 км/ч.', fine:'7 000 ₽', tags:['скорость']},
  {gl:'18', art:'18.5', title:'Превышение 80+ км/ч', law:'Превышение скорости 80+ км/ч.', fine:'10 000 ₽ + лишение 1 год', tags:['скорость']},

  // Глава 19 — общественный порядок
  {gl:'19', art:'19.1', title:'Мелкое хулиганство', law:'Явное неуважение к обществу, нецензурная брань и пр.', fine:'до 10 000 ₽ или арест 10 суток', tags:['хулиганство']},
  {gl:'19', art:'19.2', title:'Оскорбление', law:'Оскорбление, унижение чести и достоинства.', fine:'до 10 000 ₽ или арест 10 суток', tags:['оскорбление']},
  {gl:'19', art:'19.3', title:'Побои (без УК)', law:'Побои/иные насильственные действия, без состава УК.', fine:'до 20 000 ₽ или арест 10 суток', tags:['побои']},
  {gl:'19', art:'19.4', title:'Распитие/появление в опьянении в общественных местах', law:'Алкоголь в общ. местах/появление в опьянении.', fine:'5 000 ₽', tags:['алкоголь','общественное место']},
  {gl:'19', art:'19.5', title:'Попрошайничество', law:'Занятие попрошайничеством в общественных местах.', fine:'Предупреждение или арест 10 суток', tags:['попрошайничество']},
  {gl:'19', art:'19.6', title:'Предпринимательство без регистрации/лицензии', law:'Деятельность без регистрации/лицензии при обязательности.', fine:'100 000 ₽', tags:['предпринимательство']}
];

DB.forEach(x=>{
  x._hay = norm([x.title, x.law, (x.tags||[]).join(' '), (x.syn||[]).join(' ')].join(' '));
});

function score(item, q){
  const nq = norm(q);
  if(!nq) return 0;
  let s = 0;
  nq.split(' ').forEach(w=>{ if(w.length>2 && item._hay.includes(w)) s+=2; });
  (item.tags||[]).forEach(t=>{ if(nq.includes(norm(t))) s+=1; });
  (item.syn||[]).forEach(t=>{ if(nq.includes(norm(t))) s+=1.5; });
  if(item._hay.indexOf(nq)>=0) s+=3;
  return s;
}

function render(results, query){
  const box = document.getElementById('results');
  const empty = document.getElementById('empty');
  box.innerHTML = '';
  if(!results.length){ empty.style.display='block'; return; }
  empty.style.display='none';
  results.forEach(r=>{
    const el = document.createElement('div');
    el.className = 'card';
    el.innerHTML = `<div class="row" style="justify-content:space-between;align-items:flex-start;margin-bottom:6px">
        <div class="pill">Глава ${r.gl} · Статья ${r.art}</div>
        <div class="pill">Штраф: <span class="fine">${r.fine}</span></div>
      </div>
      <div style="font-weight:700;margin-bottom:6px">${highlight(r.title, query)}</div>
      <div class="muted">${highlight(r.law, query)}</div>
      ${r.tags?.length? `<div class="muted" style="margin-top:8px;font-size:12px">Теги: ${r.tags.map(t=>`#${t}`).join(' ')}</div>`:''}`;
    box.appendChild(el);
  });
}

function search(){
  const q = document.getElementById('q').value;
  const withScore = DB.map(x=>({...x, _s:score(x,q)})).filter(x=>x._s>0);
  withScore.sort((a,b)=> b._s - a._s);
  render(withScore.slice(0, 12), q);
}

const btn = document.getElementById('btn');
const inp = document.getElementById('q');
btn.addEventListener('click', search);
let t;
inp.addEventListener('input', ()=>{ clearTimeout(t); t = setTimeout(search, 220); });
inp.addEventListener('keydown', (e)=>{ if(e.key==='Enter'){ e.preventDefault(); search(); }});
</script>

</body>
</html>
